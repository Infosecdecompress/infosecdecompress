---
template: post
title: EP18 - 怎麼樣的備份才夠有效？
slug: ep18_whats_the_proper_way_to_backup
socialImage: /media/ep18_cover.png
draft: false
date: 2020-09-20T22:52:35.094Z
description: 上一集的內容中，唐鳳有提到備份的重要性，大家應該對備份都有點基本概念，也會去備份自己的電腦和手機，不過你的備份習慣真的萬無一失嗎？遇到任何事都能找回檔案嗎？
category: Episodes
tags:
  - backup
  - cloud storage
---
## Podcast連結

* [Apple Podcast](https://podcasts.apple.com/tw/podcast/%E8%B3%87%E5%AE%89%E8%A7%A3%E5%A3%93%E7%B8%AE/id1513276667#episodeGuid=ckfbq6sqbc1ga0897h1ifiorm)
* [Spotify Podcast](https://open.spotify.com/episode/2GAhOPpMYtcIGwGEwAuXm8)
* [Firstory Podcast](https://open.firstory.me/story/ckfbq6sqbc1ga0897h1ifiorm)

- - -

## 備份的目的

避免資料不小心損毀或無法取得，不管是因為電腦壞掉、東西被偷、或者人為的失誤不小心刪除。

## 三二一備份原則

政務委員 唐鳳在[上一集的訪談](/posts/ep17_interview_with_audrey_tang/)中提到的三二一備份原則  

* 備份放在三個地方

  * 將資料放在多個的地方，避免因為一個裝置失效而遺失所有資料
* 要有兩種不同的備份方式

  * 都使用同一種備份方式的話有可能會發生這種備份方式出錯，導致所有用這個方式備份的資料都遺失
* 至少一份在與你不同的地方

  * 避免地震、火災或是遭小偷等事件導致同時遺失所有備份

## 備份管道

#### 行動硬碟

* 優點：傳輸速度快、不需要網路、管理上較容易、價格不貴
* 缺點：較麻煩、無法很即時隨身備份和還原

#### 雲端硬碟

* 優點：很方便、可以即時備份和還原
* 缺點：依賴網路、雲端硬碟供應商需要慎選、會有月租費

#### NAS 網路附加儲存

類似自己架設一個私人的雲端硬碟  

* 優點：設定正確的話可以同時有雲端硬碟的方面性和行動硬碟的安全性
* 缺點：如果設定錯誤會十分的不安全、需購買硬體和硬碟，成本較高 在[EP13](/posts/ep13_what_happen_if_my_smart_devices_are_hacked/)中和大家介紹過的[網路裝置的搜尋引擎Shodan](/posts/ep13_what_happen_if_my_smart_devices_are_hacked/#shodan-網路裝置的搜尋引擎)上就找得到很多設定錯誤的NAS，這些NAS可能沒有設定密碼保護或是使用了預設密碼，因此駭客是可以輕易的存取那些NAS÷中的所有資料的。

## 備份模式

當我們在討論備份模式時，除了要考慮備份這個動作的各種條件外，也要考慮如果發生意外時還原的方便性和難易度。即便備份的過程很簡單，還原時卻很困難又要花很多時間，也會讓整個備份流程的可用性大幅下降。\
除了保留最新的備份外，最好也可以保留多個不同版本的備份。因為有的時候我們會必須要將資料還原到較早之前的版本。像是有很多惡意程式在進入系統後會先埋伏一陣子再發動攻擊。如果我們在受到攻擊後只是還原到前一天的備份的話，只會再次受到攻擊而已。因此比較保險的做法保存多個不同版本的備份，這樣在遇到事件時才能避免類似的事情發生。  

### 完整備份 Full Backup

將要備份的所有資料完整複製到備份硬碟中

* 優點：還原時只需要還原一份備份，速度較快
* 缺點：如果資料量大的話就會需要花較多的時間、每個備份檔會很大

![](/media/backup_fullbackup.jpg)

### 增量備份 Incremental Backup

每次增量備份只會備份上次備份後有被修改的資料

* 優點：每次備份的資料量較小，速度較快
* 缺點：還原時會需要還原較多份的備份，速度較慢、如果任一備份區段毀損會無法復原

![](/media/backup_incrementalbackup.jpg)

### 差異備份 Differential Backup

每次差異備份會備份從上次完整備份後所更動的東西

* 特點：備份時不會像完整備份需要處理那麼多資料，還原時不需要像增量備份還原那麼多份備份

![](/media/backup_differentialbackup.jpg)

### GFS輪替原則/三代輪替原則 Grandfather-Father-Son Rotation

結合了不同種的備份模式來達到可用性和安全性上的平衡

* 祖父等級：每個月做一次完整備份，每個備份會被保存一年
* 父親等級：每個禮拜做一次完整備份，每個備份會被保存一個月
* 兒子等級：每天做一次差異或增量備份，每個備份會被保存一週 GFS原則中的備份頻率以及保存的時間都是可以根據不同的情況和需求去做調整的。  

透過這種階層式的備份模式，我們可以確保過去一段時間內的資料都會被備份，即使發生有惡意程式潛伏之類的情況也能往前回朔到一定的時間內，同時又不會花太多的空間和成本在保存備份上，算是一個在可用性和安全性上取得的一個平衡。

## 硬體設備的備份

除了軟體跟資料的備份外，硬體也是需要備份的。 像Google、Facebook這樣的大公司為了確保能夠提供不中斷的服務，除了在全世界各地設立資料中心外，也會透過設立備用的資料中心。 備份設備可以分為三種方法：

* 熱備援場所

  * 會有著和正在運作的資料中心一模一樣的軟體和硬體，有的甚至連最新的資料都會同步
  * 發生意外時，只要透過簡單的設定就能將熱備援場所替代出問題的資料中心，確保服務不中斷
  * 維護熱備援場所的成本十分的高，幾乎跟維護一個正在運作的資料中心一樣
* 冷備援場所

  * 只有一些基本設備像是電源和空調
  * 維護的成本非常的低
  * 真的出事的時候就需要花不少時間設立硬體和軟體
* 溫備援場所

  * 介在熱備援和冷備援之間
  * 除了基本設備外還會有一些硬體，像是伺服器和網路線路之類的
  * 不會有所有的軟體和資料
  * 算是一個折衷的選擇，不像熱備援場所的維護成本那麼高，發生意外時也不會需要像冷備援場所需要花那麼多時間

## 我的備份方式

我目前同時使用了雲端硬碟和行動硬碟來備份我所有的資料。\
雲端硬碟是與電腦隨時同步的，用來確保我所有的資料都可以很即時的被備份。\
行動硬碟的話則是每隔幾週會手動備份。\
在將資料手動備份到行動硬碟前我也會用防毒軟體對檔案進行掃描，確保備份的檔案是乾淨安全的，沒有惡意程式藏在裡面。

Windows和Mac都有內建的備份功能，使用上算是滿容易和方便的，大家可以透過內建的功能來將檔案備份到行動硬碟。\
**官方使用教學：**[Windows備份與還原](https://support.microsoft.com/zh-tw/help/17127/windows-back-up-restore)、[Mac時光機](https://support.apple.com/zh-tw/HT201250)  

如果需要一些比較細節和進階的設定的話就會需要第三方軟體的協助，我使用的是一款叫做[FreeFileSync](https://freefilesync.org/)的免費開源軟體，他同時有Mac和Windows的版本，介面也滿直覺的，還有支援繁體中文，算是不錯的選擇。  

![](/media/backup_freefilesync_logo.jpg)

![](/media/backup_freefilesync_interface.jpg)